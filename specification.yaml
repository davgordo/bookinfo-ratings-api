openapi: 3.0.1
info:
    title: BookInfo Ratings API
    version: 1
    description: This is the API of the Istio BookInfo Ratings service.
    license:
        name: Apache 2.0
        url: 'http://www.apache.org/licenses/LICENSE-2.0.html'
servers:
    -
        url: 'http://localhost:8080'
    -
        url: 'https://microcks-microcks.apps.cluster-x5spj.x5spj.sandbox1870.opentlc.com/rest/ratings/1'
paths:
    '/ratings/{id}':
        get:
            tags:
                - ratings
            parameters:
                -
                    name: id
                    description: Product id
                    schema:
                        format: int32
                        type: integer
                    in: path
                    required: true
            responses:
                '200':
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ProductRatings'
                            examples:
                                Success:
                                    value:
                                        id: 1
                                        ratings:
                                            Reviewer1: 5
                                            Reviewer2: 4
                    description: successful operation
                '400':
                    description: Invalid product id
            operationId: getProductRatings
            summary: Get ratings for a product
            description: Get a list of ratings for a product
components:
    schemas:
        Rating:
            description: Rating of a product
            required:
                - color
                - stars
            type: object
            properties:
                stars:
                    format: int32
                    description: Number of stars
                    maximum: 5
                    minimum: 1
                    type: integer
                color:
                    description: Color in which stars should be displayed
                    enum:
                        - red
                        - black
                    type: string
        ProductRatings:
            description: Object containing ratings of a product
            required:
                - id
                - ratings
            type: object
            properties:
                id:
                    format: int32
                    description: Product id
                    type: integer
                ratings:
                    description: 'A hashmap where keys are reviewer names, values are number of stars'
                    type: object
                    additionalProperties:
                        type: string
tags:
    -
        name: rating
        description: Rating information for a product
externalDocs:
    description: Learn more about the Istio BookInfo application
    url: 'https://istio.io/docs/samples/bookinfo.html'
